<html>
    <head>
       <script>
            function f1(message="salut")  {
                // let message = "bonjour"

                function f2() {
                    console.log(`je suis f2, message=${message}`)
                }

                console.log("je suis f1 et je retourne la fonction f2")

                // méthodes pour accéder et modifier le message
                f2.getMessage = () => message
                f2.setMessage = (m) => message = m

                return f2
            }

            // const F = f1()
            // console.log(F)  // affiche la fonction f2
            // F()              // je suis f2, message=bonjour

            // // Accès au message via les méthodes
            // console.log(`F.getMessage() = ${F.getMessage()}`)  // F.getMessage() = bonjour
            // F.setMessage("bonsoir")
            // F()              // je suis f2, message=bonsoir
            // F.setMessage("bonne nuit") // je suis f2, message=bonne nuit
            
            // F()  
            const Fb = f1()
            Fb()
            const Fc = f1("hello")
            Fc()
            function g1({auteur, message, date}) {
                function g2() {
                    console.log(`message=${message}, daté de ${date}, signé ${auteur}`)
                }
                return g2
            }

            const G = g1({date: "hier", message: "à demain", auteur: "Pierre"})
            G()  
            function h1({auteur, message="bonjour", date="aujourd'hui"} = {}) {
                function h2() {
                    console.log(`autre message=${message}, daté de ${date}, signé ${auteur}`)
                }
                h2.getMessage = () => message
                h2.setMessage = function (m) {
                    message = m
                    return h2
                }
                h2.getDate = () => date
                h2.setMessage = function (d) {
                    date = d
                    return h2
                }
                return h2
            }

            const Ha = h1({auteur: "Pierre"})
            Ha()
            const Hb = h1({auteur: "Yannick", date: "demain"})
            Hb()
            const Hc = h1({auteur: "Pierre", date: "hier", message: "à demain"})
            Hc()       
        </script>

    </head>
    <body>
    </body>
</html>